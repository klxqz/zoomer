{if $settings.hide}
<style>
    .image #product-image{
        display: none;
    }
    #product-gallery{
        display: none;
    }
</style>
{/if}
<script src="{$wa_app_static_url}plugins/zoomer/js/jquery.jqzoom-core-pack.js" type="text/javascript"></script>
<link rel="stylesheet" href="{$wa_app_static_url}plugins/zoomer/css/jquery.jqzoom.css" type="text/css">
<script type="text/javascript">
    $(function() {
            $('.jqzoom').jqzoom({
                    zoomType: '{$settings.zoomType|escape}',
                    zoomWidth: parseInt('{$settings.zoomWidth|escape}'),
                    zoomHeight: parseInt('{$settings.zoomHeight|escape}'),
                    xOffset: parseInt('{$settings.xOffset|escape}'),
                    yOffset: parseInt('{$settings.yOffset|escape}'),
                    position: "{$settings.position|escape}",
                    title: {$settings.title|escape},
                    lens: {$settings.lens|escape},
                    imageOpacity: '{$settings.imageOpacity|escape}',
            });
            
            $('#product-skus input[type="radio"]').click(function(){
                if ($(this).data('image-id')) {
                    $("#zoommer-product-image-" + $(this).data('image-id')).click();
                }
            });
            $("#product-skus input[type=radio]:checked").click();
            
            $("select.sku-feature").change(function () {
                var key = "";
                $("select.sku-feature").each(function () {
                    key += $(this).data('feature-id') + ':' + $(this).val() + ';';
                });
                var sku = sku_features[key];
                if (sku) {
                    if (sku.image_id) {
                        $("#zoommer-product-image-" + sku.image_id).click();
                    }
                }
            });
            $("select.sku-feature:first").change();
    });
</script>
<div class="zoomer_block">
    <!-- main image -->
    <div class="main_image">
        <table>
            <tr>
                <td>
                    <a  href="{$wa->shop->productImgUrl($product,$settings.large_size)}" class="jqzoom" style="" title="{$product.name|escape}" rel="gal1">
                        <img src="{$wa->shop->productImgUrl($product,$settings.small_size)}"  title="{$product.name|escape}" >
                    </a>         
                </td>
            </tr>
        </table>

    </div>
    <!-- gallery -->
    {if count($product.images) > 1}
    <div class="small_images">
        <ul id="thumblist">
            {foreach $product.images as $image}
            <li class="image">      
                <a id="zoommer-product-image-{$image.id}" class="" href="javascript:void(0);" rel="{ldelim}gallery: 'gal1', smallimage: '{$wa->shop->productImgUrl(['id'=> $product.id, 'image_id' => $image.id, 'ext' => $image.ext, 'image_desc' => $image.description],$settings.small_size)}',largeimage: '{$wa->shop->productImgUrl(['id'=> $product.id, 'image_id' => $image.id, 'ext' => $image.ext, 'image_desc' => $image.description],$settings.large_size)}'{rdelim}">  
                    <img src="{$wa->shop->productImgUrl(['id'=> $product.id, 'image_id' => $image.id, 'ext' => $image.ext, 'image_desc' => $image.description],{$settings.thumb_size})}">  
                </a>  
            </li>
            {/foreach}
        </ul>
    </div>
    {/if}
</div>